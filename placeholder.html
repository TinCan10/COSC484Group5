<!-- Carmen Nash -->
<!DOCTYPE html>

<html lang="en">
    <head>
        <link rel="stylesheet" type="text/css" href="placeholder.css">
        <meta charset="utf-8">
        <title>
            Group Project placeholder page
        </title>
    </head>
    <body>
        <h1>Placeholder</h1>
        <div class="forum_head">
            <div name="sort_by">
                Sort By: 
            </div>
            <div class="sort_element"><a href="placeholder.html?sort=new" id="sort_new">New</a></div>
            <div class="sort_element"><a href="placeholder.html?sort=replies" id="sort_replies">Replies</a></div>
            <div class="sort_element"><a href="placeholder.html?sort=old" id="sort_old">Old</a></div>
            <div class="sort_element">
                <label name="search">Search:</label>
                <input type="text" name="search",id="sort_search">
            </div>
        </div>
        <div class="forum_container" id="forum_container">

        </div>
    </body>
</html>
<script>
    var forum_data = `{ "posts" : [
    { "username" : "jane doe" , "title" : "cool title" , "subject" : "Philosopy", "replies" : "3", "time_signature":1},
    { "username" : "john doe" , "title" : "cooler title" , "subject" : "Philosopy", "replies" : "5", "time_signature":2},
    { "username" : "jane doe" , "title" : "coolest title" , "subject" : "Philosopy", "replies" : "15", "time_signature":3}
    ]}`;
    var parsed_data = JSON.parse(forum_data);
    var params = new URLSearchParams(document.location.search);

    buildForum(parsed_data.posts);

    function buildForum(posts){ //Posts = array of post objects
        var container = document.getElementById("forum_container");
        var sort = params.get("sort");
        
        if(sort=="new"){
            //sort_by_new(posts);
        }
        

        for(var i = 0; i < posts.length; i++){
            var row = `
                <div class="forum_post">
                    <div class="post_name">${posts[i].username}</div>
                    <div class="post_title">${posts[i].title}</div>
                    <div class="post_subject">${posts[i].subject}</div>
                    <div class="post_replies">replies:${posts[i].replies}</div>
                </div>
            `
            container.innerHTML += row;
        }
    }

    
    function sort_by_new(posts){
        posts.sort((a,b)=>{
            if(a.time_signature>b.time_signature){
                return -1;
            }
        });
    }
    
</script>